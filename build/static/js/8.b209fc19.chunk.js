(this.webpackJsonpasbolsyn=this.webpackJsonpasbolsyn||[]).push([[8],{102:function(e,t,n){"use strict";n.r(t);var a=n(71),r=n(70),c=n(80),o=n(0),s=n.n(o),i=n(20),u=n(82),l=n(78),b=n(76),m=n(77);var d={onUpdatePassword:u.a.updatePassword};t.default=Object(i.c)((function(e){return{login:e.login}}),d)((function(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),i=n[0],u=n[1],d=Object(o.useState)(!1),f=Object(c.a)(d,2),p=f[0],h=f[1],w=Object(o.useReducer)((function(e,t){return Object(r.a)({},e,{},t)}),{oldPassword:"",newPassword:"",checkedPassword:""}),g=Object(c.a)(w,2),v=g[0],y=g[1],E=e.onUpdatePassword,O=function(e){var t=e.target.name,n=e.target.value;y(Object(a.a)({},t,n))};return s.a.createElement("div",null,s.a.createElement("h1",{className:"main-logo text-center f-32"},"As Bolsyn"),s.a.createElement("div",{className:"row align-items-center justify-content-center mt-180"},s.a.createElement("div",{className:"update-password container bg-white base-shadow"},s.a.createElement("div",{className:"text-left"},s.a.createElement("p",{className:"container my-20 f-14"},"\u0421\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f")),s.a.createElement("div",{className:"d-flex flex-column container "},s.a.createElement("div",{className:"d-flex flex-row"},s.a.createElement("input",{required:!0,type:p?"text":"password",className:"container my-8",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"oldPassword",value:v.oldPassword,onChange:O}),s.a.createElement("div",{className:"show-align-self-center text-grey cursor-pointer mt-18 position-absolute r-64",onClick:p?function(){return h(!1)}:function(){return h(!0)}},p?s.a.createElement(b.a,{icon:m.b}):s.a.createElement(b.a,{icon:m.a}))),s.a.createElement("input",{required:!0,type:p?"text":"password",className:"container my-8",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"newPassword",value:v.newPassword,onChange:O}),s.a.createElement("input",{required:!0,type:p?"text":"password",className:"container my-8",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"checkedPassword",value:v.checkedPassword,onChange:O}),i&&s.a.createElement("p",{className:"text-danger"},"\u0412\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0435 \u043d\u043e\u0432\u044b\u0435 \u043f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442 \u043b\u0438\u0431\u043e \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0441\u0442\u0430\u0440\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),s.a.createElement("button",{onClick:function(e){e.preventDefault(),v.newPassword.length>8&&v.newPassword===v.checkedPassword?E&&E({old_password:v.oldPassword,new_password:v.checkedPassword},{}):u(!0)},className:"container update-password__submit mt-16 mb-40",type:"submit"},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c"))),s.a.createElement(l.a,null)))}))},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(71);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},71:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},73:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(70),r=function(e,t,n,r){var c=n.callbacks||{};e({type:n.action.started}),n.apiCall().then((function(t){switch(t.status){case 200:case 201:t.text().then((function(t){if(r){var o="data:image/png;base64,".concat(t);e(Object(a.a)({type:n.action.success},n.onSuccess(o))),c.onSuccess&&c.onSuccess(n.onSuccess(o))}else{var s=JSON.parse(t);e(Object(a.a)({type:n.action.success},n.onSuccess(s))),c.onSuccess&&c.onSuccess(n.onSuccess(s))}}));break;case 230:t.text().then((function(t){e(Object(a.a)({type:n.action.success},n.onSuccess(!0))),c.onSuccess&&c.onSuccess(n.onSuccess(!0))}));break;case 500:t.text().then((function(t){e(Object(a.a)({type:n.action.failed},n.onError({message:"\u043e\u0448\u0438\u0431\u043a\u0430 500!"})))}));break;case 504:t.text().then((function(t){e(Object(a.a)({type:n.action.failed},n.onError({message:"serverError"})))}));break;default:e({type:n.action.failed,errorMessage:"\u041e\u0448\u0438\u0431\u043a\u0430 #".concat(t.status)})}}),(function(t){e(Object(a.a)({type:n.action.failed,errorMessage:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435"},n.onError({message:"serverError"})))}))}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="http://185.22.67.118:8080/"},75:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s}));var a=n(70),r=function(e){var t=Object(a.a)({},{Accept:"application/json, application/xml, text/plain, text/html, *.*",Token:"".concat(sessionStorage.getItem("token")),"Content-Type":"application/json"});return e.token&&(t.Token="Bearer ".concat(e.token)),t},c=function(e){return fetch(e.url,{method:"POST",headers:r(e),body:JSON.stringify(e.data||{})})},o=function(e){return fetch(e.url,{method:"GET",headers:r(e)})},s=function(e){return e.data?fetch(e.url,{method:"PUT",headers:r(e),body:JSON.stringify(e.data||{})}):fetch(e.url,{method:"PUT",headers:r(e)})}},78:function(e,t,n){"use strict";var a=n(0),r=n(72),c=n(76),o=n(77);n(79);t.a=function(){return a.createElement("div",{className:"container tabbar d-flex flex-row justify-content-between pt-12 pb-20 fill_w"},a.createElement(r.a,{to:"/",activeClassName:"tabbar__activeLink text-decoration-none ml-14"},a.createElement("div",{className:"tabbar__item text-center pb-8 px-8"},a.createElement(c.a,{className:"tabbar__item--icon ml-6 pb-4",icon:o.e,color:""}),a.createElement("p",null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"))),a.createElement(r.a,{to:"/map",activeClassName:"tabbar__activeLink text-decoration-none"},a.createElement("div",{className:"tabbar__item text-center pb-8 px-8"},a.createElement(c.a,{className:"tabbar__item--icon pb-4",icon:o.f,color:""}),a.createElement("p",null,"\u041a\u0430\u0440\u0442\u0430"))),a.createElement(r.a,{to:"/offer",activeClassName:"tabbar__activeLink text-decoration-none"},a.createElement("div",{className:"tabbar__item text-center pb-8 px-8"},a.createElement(c.a,{className:"tabbar__item--icon ml-8 pb-4",icon:o.g,color:"#00BBFF"}),a.createElement("p",{className:"tabbar__item--center"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))),a.createElement(r.a,{to:"/login",activeClassName:"tabbar__activeLink text-decoration-none"},a.createElement("div",{className:"tabbar__item text-center pb-8 px-8"},a.createElement(c.a,{className:"tabbar__item--icon ml-8 pb-4",icon:o.d,color:""}),a.createElement("p",null,"\u0418\u0441\u0442\u043e\u0440\u0438\u044f"))),a.createElement(r.a,{to:"/cabinet",activeClassName:"tabbar__activeLink text-decoration-none"},a.createElement("div",{className:"tabbar__item text-center pb-8 px-8"},a.createElement(c.a,{className:"tabbar__item--icon ml-8 pb-4",icon:o.i,color:""}),a.createElement("p",null,"\u041a\u0430\u0431\u0438\u043d\u0435\u0442"))))}},79:function(e,t,n){},80:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(i){r=!0,c=i}finally{try{a||null==s.return||s.return()}finally{if(r)throw c}}return n}}(e,t)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,"a",(function(){return r}))},82:function(e,t,n){"use strict";var a=n(73),r=n(74),c=n(75),o=sessionStorage.getItem("userId"),s="".concat(r.a,"api/user/login"),i="".concat(r.a,"api/user/checkphone"),u="".concat(r.a,"api/user/checkcode"),l="".concat(r.a,"api/user/").concat(o,"/changepassword"),b="".concat(r.a,"api/user/registration"),m=n(11);t.a={login:function(e,t){return function(n,r){Object(a.a)(n,r,{callbacks:t,action:m.d,apiCall:function(){return function(e){return Object(c.b)({data:e,url:s})}(e)},onSuccess:function(e){return window.location.replace("/"),sessionStorage.setItem("token",e.Token),sessionStorage.setItem("userId",e.User.id),{user_token:e.Token,user_info:e.User}},onError:function(e){return{user_token:e.Error}}})}},checkPhone:function(e,t){return function(n,r){Object(a.a)(n,r,{callbacks:t,action:m.b,apiCall:function(){return function(e){return Object(c.b)({data:e,url:i})}(e)},onSuccess:function(e){console.log("checkphone token changed to ",e.Token),sessionStorage.setItem("token",e.Token)},onError:function(e){return{errorMessage:e.Error}}})}},checkCode:function(e,t){return function(n,r){Object(a.a)(n,r,{callbacks:t,action:m.a,apiCall:function(){return function(e){return Object(c.b)({data:e,url:u})}(e)},onSuccess:function(e){console.log("checkcode - token changed to ",e.Token),sessionStorage.setItem("token",e.Token)},onError:function(e){return{errorMessage:e.Error}}})}},register:function(e,t){return function(n,r){Object(a.a)(n,r,{callbacks:t,action:m.e,apiCall:function(){return function(e){return Object(c.b)({data:e,url:b})}(e)},onSuccess:function(e){sessionStorage.setItem("token",e.Token),window.location.replace("/cabinet")},onError:function(e){return{errorMessage:e.Error}}})}},updatePassword:function(e,t){return function(n,r){Object(a.a)(n,r,{callbacks:t,action:m.f,apiCall:function(){return function(e){return Object(c.c)({data:e,url:l})}(e)},onSuccess:function(){window.location.replace("/cabinet")},onError:function(e){return{errorPassword:e.Error}}})}}}}}]);
//# sourceMappingURL=8.b209fc19.chunk.js.map